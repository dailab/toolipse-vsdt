package foo; // TODO package declaration

# Standard imports
import java.io.Serializable;
import de.dailab.jiactng.agentcore.action.Action;
import de.dailab.jiactng.agentcore.action.DoAction;
import de.dailab.jiactng.agentcore.comm.message.IJiacMessage;
import de.dailab.jiactng.ruleengine.timer.TimeFact;

# Domain imports
import de.dailab.jiactng.examples.auction.onto.Auction;
import de.dailab.jiactng.examples.auction.onto.Bid;
import de.dailab.jiactng.examples.auction.onto.Message;

rule "CreateAuction_Seller_createauction"
when
	action : Action( name == "CreateAuction_Seller_createauction")
	jiacMessage : IJiacMessage()
	eval("seller_createauctionrequest".equals(jiacMessage.getHeader(IJiacMessage.Header.SEND_TO)))
	auction : Auction() from jiacMessage.payload
then
	System.out.println("RULE CreateAuction_Seller_createauction" fired);
	insert( new DoAction(action, null, new Serializable[] { auction }) );
	retract( jiacMessage);
end

rule "CloseAuction_Seller_0_sold"
when
	action : Action( name == "CloseAuction_Seller_0_sold")
	jiacMessage : IJiacMessage()
	eval("seller_notifysold".equals(jiacMessage.getHeader(IJiacMessage.Header.SEND_TO)))
	message : Message() from jiacMessage.payload
then
	System.out.println("RULE CloseAuction_Seller_0_sold" fired);
	insert( new DoAction(action, null, new Serializable[] { message }) );
	retract( jiacMessage);
end

rule "CloseAuction_Seller_1_notsold"
when
	action : Action( name == "CloseAuction_Seller_1_notsold")
	jiacMessage : IJiacMessage()
	eval("seller_notifynotsold".equals(jiacMessage.getHeader(IJiacMessage.Header.SEND_TO)))
	message : Message() from jiacMessage.payload
then
	System.out.println("RULE CloseAuction_Seller_1_notsold" fired);
	insert( new DoAction(action, null, new Serializable[] { message }) );
	retract( jiacMessage);
end

