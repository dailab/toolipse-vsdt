package foo; // TODO package declaration

# Standard imports
import java.io.Serializable;
import de.dailab.jiactng.agentcore.action.Action;
import de.dailab.jiactng.agentcore.action.DoAction;
import de.dailab.jiactng.agentcore.comm.message.IJiacMessage;
import de.dailab.jiactng.ruleengine.timer.TimeFact;

# Domain imports
import de.dailab.jiactng.examples.auction.onto.Auction;
import de.dailab.jiactng.examples.auction.onto.Bid;
import de.dailab.jiactng.examples.auction.onto.Message;

rule "PlaceBid_Bidder_dobid"
when
	action : Action( name == "PlaceBid_Bidder_dobid")
	jiacMessage : IJiacMessage()
	eval("bidder_placebidrequest".equals(jiacMessage.getHeader(IJiacMessage.Header.SEND_TO)))
	bid : Bid() from jiacMessage.payload
then
	System.out.println("RULE PlaceBid_Bidder_dobid" fired);
	insert( new DoAction(action, null, new Serializable[] { bid }) );
	retract( jiacMessage);
end

rule "CloseAuction_Bidder_awardnotification"
when
	action : Action( name == "CloseAuction_Bidder_awardnotification")
	jiacMessage : IJiacMessage()
	eval("bidder_notifysold".equals(jiacMessage.getHeader(IJiacMessage.Header.SEND_TO)))
	message : Message() from jiacMessage.payload
then
	System.out.println("RULE CloseAuction_Bidder_awardnotification" fired);
	insert( new DoAction(action, null, new Serializable[] { message }) );
	retract( jiacMessage);
end

