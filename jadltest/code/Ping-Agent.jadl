

service Ping-Agent ( in $param1 : int ) ( out ) {
    var $n : int ;
    var $lastMessage : string ;
    {
        {
            $n = $param1 ;
        }
        {
            print "Ping-Agent started" ;
        }
        {
            var $ping : string ;
            var $paramB : bool ;
            var $s1 : string ;
            var $s2 : string ;
            var $s3 : string ;
            var $s4 : string ;
            var $s5 : string ;
            $ping = "ping" ;
            $paramB = $n > 0 ;
            $s1 = "1" ;
            $s2 = "2" ;
            $s3 = "3" ;
            $s4 = "4" ;
            $s5 = "5" ;
            {
                send "PongAgent_Ping" ( $ping ) ;
                send "PongAgent_Ping" ( $paramB ) ;
                send "PongAgent_Ping" ( $s1 ) ;
                send "PongAgent_Ping" ( $s2 ) ;
                send "PongAgent_Ping" ( $s3 ) ;
                send "PongAgent_Ping" ( $s4 ) ;
                send "PongAgent_Ping" ( $s5 ) ;
            }
        }
        {
            var $pong : string ;
            receive timeout 10000 "PingAgent_Pong" $pong;
            $lastMessage = $pong ;
        }
        {
            print $lastMessage ;
        }
        if ( $n > 0 ) {
            var $pung : string ;
            $pung = "pung" ;
            send "PongAgent_Pung" ( $pung ) ;
        }
        else {
            if ( $n < 0 ) {
                var $peng : string ;
                $peng = "peng" ;
                send "PongAgent_Peng" ( $peng ) ;
            }
            else {
                print "Executing _DO_NOTHING_" ;
            }
        }
    }
}